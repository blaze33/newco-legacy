{% load i18n %}
{% load voting_tags %}
{% load voting_utils %}
{% load content_utils %}
{% load bootstrap_tags %}

{% dict_entry_for_item question from votes as vote %}
{% dict_entry_for_item question from scores as score %}

<div class="row one_row{% if question.is_draft %} well well-small{% endif %}" id="{{ question.anchor }}">
  <div class="span1 vote-controls">
    {% include "items/_vote_box.html" with content=question item=item score=score vote=vote display=display csrf_token=csrf_token only %}
    {% if item %}{% edit_buttons user question delete_next=item.get_absolute_url %}{% else %}{% edit_buttons user question edit_next=path delete_next=path %}{% endif %}
  </div>
  <div class="span8 question-content">
    {% if question.is_draft %}<p><small>{% trans "This question is a draft.<br>It has been anonymized." %}</small></p>{% else %}{% content_info question "signature" 32 %}{% endif %}
    {% if display == "detail" %}
      <div class="content" itemprop="name"><h1 class="question-content">{{ question.content }}</h1></div>
    {% else %}
      <a href="{{ question.get_absolute_url }}" itemprop="url"><span itemprop="name">{{ question.content }}</span></a>
    {% endif %}
  </div>
</div>

{% for answer in question.answer_set.all %}
  {% include "items/root_display/_answer.html" with answer=answer item=item scores=scores vote=vote display=display displ_sign="True" user=user only %}
{% empty %}
  {% cycle "empty" as empty silent %}
{% endfor %}

<div class="row"><div class="span8 offset1">
  <br>
  <br>
  {% include "items/feed_display/_feed_controls.html" with answer_location="embedded" content=question user=user csrf_token=csrf_token statuses=statuses experts=experts include_modal="True" only %}
</div></div>
