{% load i18n %}
{% load voting_tags %}
{% load voting_utils %}
{% load content_utils %}
{% load staticfiles %}
{% load bootstrap_tags %}

<div class="row"><div class="span7{% if questions.queryset %} nc_transition_add{% endif %}" data-toggle="collapse" data-target="#question_form" style="position: relative; left: -5px; top: -15px;">
  <i rel="add_icon" class="icon-plus" style="opacity: 0.1; z-index: -1; position: relative; left: 25px; top: +2px;"></i>
  <span>
    <button class="btn btn-mini btn-success " style="z-index: 0;"><i rel="add_icon" class="icon-plus"></i></button>
    {% if questions.queryset %}<h2 style="display:inline; opacity:0.2; position:relative; left:55px; top:4px;" rel="add_q_text">{% trans "Ask a new question!" %}</h2>{% endif %}
  </span>{% if not questions.queryset %}<h2 style="display:inline; opacity:0.2; position:relative; left:60px; top:+5px;" rel="add_q_text_no_q_yet">{% trans "No question yet! Ask the first one here!" %}</h2>{% endif %}
</div></div>

<div class="row"><div id="question_form" class="span7 offset1 collapse out" style="position: relative; top: -70px;">
  <form method="POST" action="" class="form-inline"><br>{% if not questions.queryset %}<br><br><br>{% endif %}
    {% csrf_token %}
    {% with field=q_form.content %}<div id="div_{{ field.auto_id }}" class="control-group {% if field.errors %}error{% endif %} {% if field.css_classes %} {{ field.css_classes }}{% endif %}"><div class="controls">
      <div class="input-prepend input-append">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<span class="add-on" style="margin-left: 10px;"><i class="icon-question-sign"></i></span>{{ field }}<button type="submit" class="btn" name="question"><i class="icon-share-alt"></i></button></div>
      {% include "bootstrap/_field_errors.html" %}
      {% include "bootstrap/_field_help_text.html" %}
    </div></div>{% endwith %}
    <input type="hidden" name="next" value="{{ item.get_absolute_url }}">
  </form>
</div></div>

{% for question in questions.queryset %}
  {% dict_entry_for_item question from questions.votes as vote %}
  {% dict_entry_for_item question from questions.scores as score %}

  {% include "items/root_display/_question.html" with question=question vote=vote score=score answers=question.answers display="list" %}
{% endfor %}
