
{# TITLE: With custom Form #}

{% extends "site_base.html" %}

{% load url from future %}
{% load i18n %}
{% load bootstrap_tags %}
{% load staticfiles %}

{% block extra_style %}
    {{ block.super }}
    {{ form.media.css }}
    {{ i_form.media.css }}
    {{ a_form.media.css }}
{% endblock %}

{% block head_title %}{% trans "Question" %}{% endblock %}

{% block body %}
<div class="row">
    <div class="span10">
        <h1>{% block form_header %}{% trans "Ask a question" %}{% trans ":" %}{% endblock %}</h1>
    </div>
    <div class="span2">
        <button class="btn btn-mini btn-success" data-toggle="collapse" data-target="#tips_div" style="z-index: 0 ;"><i rel="add_icon" class="icon-plus icon-white" style="margin-right: 3px; position: relative; top: -2px;"></i>{% trans "Tips" %}</button>
    </div>
</div>
<div class="row collapse out" id="tips_div">
    <div class="span10 offset2">
        <div class="well">
            {% url "item_create" "item" as url %}{% blocktrans %}
                <h4>Tips:</h4>
                Here, you can ask a question about one or several products already <b><a href="{{ url }}" class="black tooltip-top" title="Click here if not" target="_blank">existing</a></b> at NewCo:
                <ol>
                    <li>Write down your question.</li>
                    <li>Select one or several products to bind that question to, using the search bar.</li>
                    <li>Once the question submitted, you can wait for an answer or, if you are getting impatient, <b>ask an expert</b> to help you out.</li>
                </ol>
            {% endblocktrans %}
        </div>
    </div>
</div>
<br>
</br>

<form class="form-horizontal" action="?{% if request.GET.fields %}fields={{ request.GET.fields }}{% endif %}{% if request.GET.template %}&template={{ request.GET.template }}{% endif %}" method="POST">{% csrf_token %}
    {{ q_form_complex|as_bootstrap }}
    <br>
    <br>
    <hr>
    {{ i_form_complex|as_bootstrap }}
    <hr>
    <br>
    <br>
    {{ a_form_complex|as_bootstrap }}
    <br>
    <br>
    <div class="control-group">
        <div class="controls">
            <input type="submit" name="add_question" class="btn btn-primary" value="{% trans 'Submit/ Publish your question' %}">

            {#<input type="submit" name="save_as_draft" class="btn" value="{% trans 'Save as draft' %}" title="{% trans "Available soon" %}" disabled>#}
            {% if next %}<input type="hidden" name="next" value="{{ next }}">{% endif %}
        </div>
    </div>
</form>

{% endblock %}

{% block extra_body_base %}
    {{ block.super }}
    <script type="text/javascript">
        (function ($) {
            $(function () {
                $(".chzn-select").each(function(i, select) {
                    var $select = $(select);
                    $select.chosen({max_selected_options: 1, no_results_text: "{{ form.no_results }}"});
                    $select.bind("liszt:maxselected", function () {});
                });
                $(".chzn-select-deselect").each(function(i, select) {
                    var $select = $(select);
                    $select.chosen({allow_single_deselect: true});
                });
            });
        })((typeof window.django != 'undefined') ? django.jQuery : jQuery);
    </script>
    <script type="text/javascript">
        {% if add_product %}$('#item_form').collapse('show');{% endif %}
        {% if add_answer %}$('#answer_form').collapse('show');{% endif %}
    </script>
    {{ form.media.js }}
    {{ i_form.media.js }}
    {{ a_form.media.js }}
{% endblock %}
