{% extends "site_base.html" %}

{% load url from future %}
{% load i18n %}
{% load bootstrap_tags %}
{% load staticfiles %}

{% block extra_style %}
  {{ block.super }}
  <script type="text/javascript" src="{% static 'admin/js/jquery.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'admin/js/jquery.init.js' %}"></script>

  <script type="text/javascript">
      (function ($) {
          $(function () {
              $(".chzn-select").each(function(i, select) {
                  var $select = $(select);
                  $select.chosen({max_selected_options: 1, no_results_text: "{{ form.no_results }}"});
                  $select.bind("liszt:maxselected", function () {});
              });
          });
      })((typeof window.django != 'undefined') ? django.jQuery : jQuery);
  </script>

  {{ form.media }}
  {{ formset.media.css }}
{% endblock %}

{% block head_title %}{% trans "Question" %}{% endblock %}

{% block body %}
<h1>{% block form_header %}{% trans "Ask a question:" %}{% endblock %}</h1>
<br>

{% url "item_create" "item" as url %}

<button class="btn btn-mini btn-success " data-toggle="collapse" data-target="#question_form" style="z-index: 0 ;"><i rel="add_icon" class="icon-plus"></i>{% trans "Tips" %}</button>
<div id="question_form" class="collapse out">
  {% blocktrans %}
    Here, you can ask a question about one or several products already <b><a href="{{ url }}" class="black tooltip-top" title="Click here if not" target="_blank">existing</a></b> at NewCo:
    <ol>
      <li>Write down your question.</li>
      <li>Select one or several products to bind that question to, using the search bar.</li>
      <li>Once the question submitted, you can wait for an answer or, if you are getting impatient, <b>ask an expert</b> to help you out.</li>
    </ol>
  {% endblocktrans %}
</div>
</br>

<form action="" method="POST">{% csrf_token %}
  {{ form|as_bootstrap }}

  <br>

  <div class="control-group"><div class="controls">
    {% trans "Can't find the product related to your question?" %} <a class="btn btn-primary" data-toggle="modal" role="button" href="#itemModal"><i rel="add_icon" class="icon-plus icon-white"></i> {% trans "Add it" %}</a>

    <div class="modal fade hide" id="itemModal" tabindex="-1" role="dialog" aria-labelledby="itemModalLabel" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3 id="itemModalLabel">{% trans "Add a product"%}{% trans ":" %}</h3>
      </div>
      <div class="modal-body">{{ i_form|as_bootstrap }}</div>
      <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">{% trans "Cancel" %}</button>
        <input type="submit" name="add_item" class="btn btn-primary" value="{% trans 'Add product' %}">
      </div>
    </div>
  </div></div>

  <br>

  <label class="checkbox">
    <input type="checkbox" name="cb_answer" data-toggle="collapse" data-target="#answer_form"{% if cb_answer %}checked{% endif %}>
    {% trans "Answer your own question" %}
  </label>
  <div id="answer_form" class="row collapse {% if formset_errors or cb_answer %}in{% else %}out{% endif %}"><div class="span7">
    {{ formset.management_form }}
    {% for form in formset %}
      {{ form|as_bootstrap }}
    {% endfor %}
  </div></div>

  <input type="submit" name="add_question" class="btn" value="{% trans 'Submit' %}"/>
  {% if next %}<input type="hidden" name="next" value="{{ next }}" />{% endif %}
</form>

{% endblock %}

{% block extra_body_base %}
  {{ block.super }}
  {{ formset.media.js }}
  <script type="text/javascript">{% if show %}$("#itemModal").modal("show"){% endif %}</script>
{% endblock %}

{% block extra_script %}
    {{ block.super }}

	<script type ="text/javascript">
		$(document).ready(function(){
	    mixpanel.track("Load_add_question");
		});
	</script>
{% endblock %}

{# TITLE: Original #}