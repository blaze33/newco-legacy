{% extends "site_base.html" %}

{% load i18n %}
{% load content_utils %}
{% load staticfiles %}

{% block extra_style %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/content.css">
    {% if questions %}{{ questions.0.answer_form.media.css }}{% endif %}
{% endblock %}

{% block head_title %}{{ item.name }}{% endblock %}

{% block body %}

{% include "items/_data_sheet.html" %}

<br>
<br>


<div class="tabbable">
    <ul class="nav nav-tabs">
        <li{% if '/link-' not in request.path and '/feature-' not in request.path and '/story-' not in request.path %} class="active"{% endif %}><a href="#questions" data-toggle="tab">{% trans "Questions" %}</a></li>
        <li{% if '/link-' in request.path %} class="active"{% endif %}><a href="#links" data-toggle="tab">{% trans "Links" %}</a></li>
        <li{% if '/feature-' in request.path %} class="active"{% endif %}><a href="#features" data-toggle="tab">{% trans "Features" %}</a></li>
        <li{% if '/story-' in request.path %} class="active"{% endif %}><a href="#stories" data-toggle="tab">{% trans "Stories" %}</a></li>
    </ul>

    <div class="tab-content" style="overflow: visible;">
        <div id="questions" class="tab-pane{% if '/link-' not in request.path and '/feature-' not in request.path and '/story-' not in request.path %} active{% endif %}">{% include "items/_question_list.html" %}</div>
        <div id="links" class="tab-pane{% if '/link-' in request.path %} active{% endif %}">{% include "items/_link_list.html" %}</div>
        <div id="features" class="tab-pane{% if '/feature-' in request.path %} active{% endif %}">{% include "items/_feature_list.html" %}</div>
        <div id="stories" class="tab-pane{% if '/story-' in request.path %} active{% endif %}">
            <div class="row"><div class="span7">
                <h3>Soon you'll be able to tell us a nice story about this product</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus erat diam, convallis et convallis vel, pharetra vel nulla. Aliquam ac tellus a purus mollis posuere. Etiam interdum dictum sapien eu condimentum. Fusce commodo pellentesque diam et mollis. Nulla et purus nunc, non placerat lacus. Phasellus elementum fermentum tortor vel porttitor. Nunc cursus, turpis eu malesuada pharetra, velit lacus interdum ipsum, ac venenatis turpis dolor at augue. Vestibulum tellus risus, interdum vitae fringilla nec, iaculis vel metus.
                <ul class="thumbnails">
                <li class="span3"><a href="#" class="thumbnail">
                  <img src="http://lorempixel.com/g/260/180" alt="">
                </a></li>
                <li class="span3"><a href="#" class="thumbnail">
                  <img src="http://lorempixel.com/g/260/180/technics" alt="">
                </a>
                </li></ul>
                Etiam interdum dictum sapien eu condimentum. Fusce commodo pellentesque diam et mollis. Nulla et purus nunc, non placerat lacus. Phasellus elementum fermentum tortor vel porttitor.
                </p>
                <hr>
            </div></div>
        </div>
    </div>
</div>

<div class="row"><div class="span7">
    <a class="btn" href="{% url item_index %}"><i class="icon-list"></i> {% trans "Items list" %}</a>
    <a class="btn" href="{% url item_edit item|to_class_name item.id %}"><i class="icon-edit"></i> {% trans "Edit Item" %}</a>
    {% if user.is_superuser %}<a class="btn" href="{% url item_delete item|to_class_name item.id %}"><i class="icon-trash"></i> {% trans "Delete Item" %}</a>{% endif %}
</div></div>

{% endblock %}

{% block extra_body_base %}
    {{ block.super }}
    <script src="{% static "js/content.js" %}"></script>
    {% if questions %}{{ questions.0.answer_form.media.js }}{% endif %}
    <script type="text/javascript"> // script can't go to '/static' : needs to translate text
        $(function(){
            var form = $('#question_form');
            var icon_change = $('[rel=add_icon]');
            var text_change = $('[rel=add_q_text]');
            var text_change_no_q_yet = $('[rel=add_q_text_no_q_yet]');
            form.on('shown', function () {
                icon_change.removeClass('icon-plus').addClass('icon-remove');
                text_change.html('&nbsp;');
                text_change_no_q_yet.html('{% trans "Ask a new question:" %}');
            })
            form.on('hidden', function () {
                icon_change.removeClass('icon-remove').addClass('icon-plus');
                text_change.html("{% trans "Ask a new question!" %}");
                text_change_no_q_yet.html('{% trans "No question yet! Ask the first one here!" %}');
            })
        
        });
    </script>
{% endblock %}
