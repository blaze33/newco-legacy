{% extends "site_base.html" %}

{% load url from future %}
{% load i18n %}
{% load account_tags %}
{% load staticfiles %}

{% block extra_style %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/global.css">
{% endblock %}

{% block extra_script %}
    {{ block.super }}
    <script type="text/javascript" src="{{ STATIC_URL }}js/homepage.js"></script>
{% endblock %}

{% block head_title %}
    {% if user.is_authenticated %}{% user_display user as username %}{% blocktrans %}Home: {{ username }}{% endblocktrans %}{% else %}{% trans "Home" %}{% endif %}
{% endblock %}

{% block body_base %}
    <div id="why_NewCo" class="collapse{% if request.GET.welcome %} in{% else %} out{% endif %}">
        <div class="container">
            <div class="hero-unit well">
                <div style="text-align:center;">
                    <h1>NewCo</h1>
                    <p><i>{% trans "Empowering people to buy better" %}</i></p>
                    </br>

                    <p style="text-align:center;">{% blocktrans %}NewCo helps you choose with confidence</br>and share your advice between users.{% endblocktrans %}</p>
                </div>
            </div>

            <div class="row">
                <div class="span4">
                    {% url "item_index" as index_url %}
                    <div style="text-align:center;"><h3>
                        {% blocktrans %}Go to the</br><a href="{{ index_url }}" class="btn btn-large btn-primary" id="explore">Product index</a></br>to explore the website.{% endblocktrans %}
                    </h3></div>
                </div>
                <div class="span4">
                    {% url "contribute" as contribute_url %}
                    <div style="text-align:center;"><h3>
                        {% blocktrans %}Go to</br><a href="{{ contribute_url }}" class="btn btn-large btn-primary">How to contribute?</a></br>to get ready for the next step.{% endblocktrans %}
                    </h3></div>
                </div>
                <div class="span4">
                    {% url "account_signup" as signup_url %}
                    <div style="text-align:center;"><h3>
                        {% blocktrans %}Directly</br><a href="{{ signup_url }}" class="btn btn-large btn-primary">Sign up!</a></br>to start your new career.{% endblocktrans %}
                    </h3></div>
                </div>
            </div>
        </div>
        <br><br><br>
    </div>

<div id="create_typeahead" class="modal fade hide">
    <div class="modal-header">
        <button class="close" data-dismiss="modal">&times;</button>
        <h3>{% trans "Create..." %}</h3>
    </div>
    <div class="modal-body">
    	<div class="row" style="margin-left: 50px">
    	    <div class="span2" align="center"><a href="{% url 'item_create' 'item' %}"><img src="{% static 'img/gears.png' %}" type="image/png"><br><br><h3 class="black">Add a product</h3></a></div>
    	    <div class="span2" align="center"><a href="{% url 'item_create' 'question' %}"><img src="{% static 'img/bulb.png' %}" type="image/png"><br><br><h3 class="black">Ask a question</h3></a></div>
    	</div>
    </div>
</div>

 <div class="subnav subnav-fixed" rel="subnav" id="homepage_fixed"><ul class="nav nav-pills">
        <li style="padding:10px"><b><a title="{% trans "Click here to close the tutorial" %}" data-toggle="collapse" data-target="#why_NewCo" href="#" class="black tooltip-tutorial">{% trans "NewCo empowers you to buy better" %}</a></b></li>
        <li{% if not '/last' in request.path and not '/questions_to_answer' in request.path %} class="active"{% endif %} id="popular"><a href="{% url 'home' %}" class="black" id="mixpanel_popular">{% trans "Popular" %}</a></li>
        <li {% if '/last' in request.path %} class="active"{% endif %} id="last"><a href="{% url 'home' 'last' %}" class="black" id="mixpanel_last">{% trans "Last Added" %}</a></li>
        <li {% if '/questions_to_answer' in request.path %} class="active"{% endif %} id="questions_to_answer"><a href="{% url 'home' 'questions_to_answer' %}" class="black" id="mixpanel_questions_to_answer">{% trans "Answer Questions" %}</a></li>
        <li {% if '/dash_feed' in request.path %} class="active"{% endif %} id="dash_feed"><a href="{% url 'dash' 'feed' %}" class="black" id="mixpanel_mynews_home">{% trans "My Newsfeed" %}</a></li>
    </ul></div>
    {{ block.super }}
{% endblock %}

{% block extra_body_base %}
    {{ block.super }}
    <script type="text/javascript"> // script can't go to '/static' : needs to translate text
        $(function(){
            var why_NewCo_div = $('#why_NewCo');
            var subnav2move = $('.subnav-fixed');

            why_NewCo_div.on('show', function () {
                subnav2move.addClass('subnav-moved');
            })

            why_NewCo_div.on('shown', function () {
                $('.tooltip-tutorial').tooltip('show');
            })

            why_NewCo_div.on('hide', function () {
                $('.tooltip-tutorial').tooltip('hide');
            })

            why_NewCo_div.on('hidden', function () {
                subnav2move.removeClass('subnav-moved');
            })

            $('.tooltip-tutorial').tooltip({
                trigger: 'manual',
                placement: 'top',
                animate: true,
                //delay: 500,
            });

            $('#explore').click(function(){
                why_NewCo_div.collapse('hide');
                return false;
            });

        {% if request.GET.welcome %}
            $('.tooltip-tutorial').tooltip('show');
        {% endif %}

        });

    </script>
    <script type ="text/javascript">
	
	$(document).ready(function(){
	mixpanel.track_links("#mixpanel_popular","Popular_home");
	mixpanel.track_links("#mixpanel_last","Lastadded_home");
	mixpanel.track_links("#mixpanel_last_contrib","Lastcontrib_home");
	mixpanel.track_links("#mixpanel_mynews_home","Mynews_home");
	if ($('div').hasClass('alert-success')){mixpanel.track("Signup Success");};
	});
	</script>
	
{% endblock %}
